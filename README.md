# Лабораторні роботи MLOps
Цей репозиторій містить всі інструменти і налаштування оточення, що я використав для виконання лабораторних робіт.

В реальному проекті версіювання було би організовано окремим репозиторієм.

### Зміст

1. Лабораторна робота 1: Робота з даними в MLOps
    - [розмітка даних](#як-запуститивідкрити-розмітку-даних)
    - [версіювання датасету](#як-працює-версіонування-датасету)
2. Лабораторна робота 2: Тренування моделей та трекінг експериментів
    - [тренування моделі](#як-тренувати-модель)
3. [Загальна структура репозиторію](#загальна-структура-репозиторію)
4. [Подальші кроки](#подальші-кроки)

### Як запустити/відкрити розмітку даних
Розмітку даних виконано в [Label Studio](https://labelstud.io/)

**Передумови:**
- встановлений docker compose

**Кроки:**

перебуваючи в коренні репозиторію 

1. `cd labeling/label-studio/`

2. `docker-compose up -d`  

    Це запустить Label Studio на http://localhost:8080/

    (налаштування порту є в `docker-compose.yml`)

3. Log in:  
    ```
    t.dzyk@setuniversity.edu.ua
    JPv$u#DaXP4m4Pr
    ```
4. Recent Projects -> MLOps-hw-1

### Як працює версіонування датасету

Для версіювання наборів даних я використав [DVC](https://dvc.org/)


**Передумови:**
- встановлений DVC

перебуваючи в коренні репозиторію 

`cd versioning/dvc`

Це основний репозиторій версіювання. 

Я ініціалізував репозиторій в режимі `dvc init --subdir` щоб зробити його розміщення можливим не в корені git репозиторію. Це було зроблено для цієї лабораторної.

Я додав папку `dataset` в dvc repo, куди я поміщаю розмічені набори даних. Ця папка додалася в `.gitignore` на цьому ж рівні, що виключило власне сам датасет, який може бути дуже великим з git трекінгу.

Я налаштував dvc data storage для цієї лабораторної на локальному середовищі. `../dvc_storage/`. Це можна побачити в файлі `.dvc/config`

Відповідно при виконанні `dvc push` дані будуть направлені в сховище. В реальному проекті це буде клауд бакет

### Як тренувати модель

Перебуваючи в корені репозиторію

`cd training/ray`

`docker-compose up --build -d`

Це підніме локальний кластер [Ray](https://docs.ray.io/en/latest/train/train.html)

Дешборд буде доступний: http://localhost:8265

Тестовий запуск можна виконати

`docker exec -it ray-head bash`

`python test_ray.py`


### Загальна структура репозиторію
- labeling
    - image_library
    
            Бібліотека зображень

    - label-studio

            Містить знімок мого локального Label Studio розгорнутого через docker compose

- versioning
    - dvc

            Власне dvc репозиторій, де версіюються набори даних. В реальному проекті саме це буде основним репозиторієм версіювання
    - dvc_storage
        
            Локальний data storage для dvc
- training
    - ray
        - ray-head
            
                Head нода ray
        - ray-worker
                
                Worker нода ray

### Подальші кроки

Я планую  перейти до класифікації зображень на наступному кроці. Це буде проста модель для розпізнавання певного паттерну зображень

